<!DOCTYPE html>
<html lang="ko">
<head>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet"
	href="https://fonts.googleapis.com/css?family=Lato">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons"
	rel="stylesheet">


<style>
body {
	font-family: "Lato", sans-serif
}

.mySlides {
	display: none
}
</style>
</head>
<body>

	<!-- Navbar -->
	<div class="w3-top">
		<div class="w3-bar w3-black w3-card">
			<a
				class="w3-bar-item w3-button w3-padding-large w3-hide-medium w3-hide-large w3-right"
				href="javascript:void(0)" onclick="myFunction()"
				title="Toggle Navigation Menu"><i class="fa fa-bars"></i></a> <a
				href="#" class="w3-bar-item w3-button w3-padding-large"> <i
				class="fa fa-home" style="font-size: 20px; color: #ffffff;"></i>홈
			</a> <a href="#band"
				class="w3-bar-item w3-button w3-padding-large w3-hide-small"> <i
				class="material-icons" style="font-size: 16px; color: white">audiotrack</i>가수
				정보
			</a> <a href="#tour"
				class="w3-bar-item w3-button w3-padding-large w3-hide-small"> <i
				class="material-icons" style="font-size: 17px; color: white">airport_shuttle</i>티켓
				예매
			</a> <a href="#contact"
				class="w3-bar-item w3-button w3-padding-large w3-hide-small"> <i
				class="material-icons" style="font-size: 17px; color: white">call</i>연락
				문의
			</a>
			<div class="w3-dropdown-hover w3-hide-small">
				<button class="w3-padding-large w3-button" title="More">
					<i class="material-icons" style="font-size: 17px; color: white">more_horiz</i>더보기<i
						class="fa fa-caret-down"></i>
				</button>
				<div class="w3-dropdown-content w3-bar-block w3-card-4">
					<a href="#" class="w3-bar-item w3-button">Merchandise</a> <a
						href="#" class="w3-bar-item w3-button">Extras</a> <a href="#"
						class="w3-bar-item w3-button">Media</a>
				</div>
			</div>
			<a href="javascript:void(0)"
				class="w3-padding-large w3-hover-red w3-hide-small w3-right"><i
				class="fa fa-search"></i></a>
		</div>
	</div>

	<!-- Navbar on small screens (remove the onclick attribute if you want the navbar to always show on top of the content when clicking on the links) -->
	<div id="navDemo"
		class="w3-bar-block w3-black w3-hide w3-hide-large w3-hide-medium w3-top"
		style="margin-top: 46px">
		<a href="#band" class="w3-bar-item w3-button w3-padding-large"
			onclick="myFunction()">가수 정보</a> <a href="#tour"
			class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">TOUR</a>
		<a href="#contact" class="w3-bar-item w3-button w3-padding-large"
			onclick="myFunction()">CONTACT</a> <a href="#"
			class="w3-bar-item w3-button w3-padding-large" onclick="myFunction()">MERCH</a>
	</div>

	<!-- Page content -->
	<div class="w3-content" style="max-width: 2000px; margin-top: 46px">

		<!-- Automatic Slideshow Images -->
		<div class="mySlides w3-display-container w3-center">
			<img src="images/4_워터밤.jpg" style="width: 100%">
			<div
				class="w3-display-bottommiddle w3-container w3-text-white w3-padding-32 w3-hide-small">
				<h3>Los Angeles</h3>
				<p>
					<b>We had the best time playing at Venice Beach!</b>
				</p>
			</div>
		</div>
		<div class="mySlides w3-display-container w3-center">
			<img src="images/7_Hippie Death Cult.jpg" style="width: 100%">
			<div
				class="w3-display-bottommiddle w3-container w3-text-white w3-padding-32 w3-hide-small">
				<h3>New York</h3>
				<p>
					<b>The atmosphere in New York is lorem ipsum.</b>
				</p>
			</div>
		</div>
		<div class="mySlides w3-display-container w3-center">
			<img src="images/5_싸이흠뻑쇼.jpg" style="width: 100%">
			<div
				class="w3-display-bottommiddle w3-container w3-text-white w3-padding-32 w3-hide-small">
				<h3>Chicago</h3>
				<p>
					<b>Thank you, Chicago - A night we won't forget.</b>
				</p>
			</div>
		</div>

		<!-- The Band Section -->
		<div class="w3-container w3-content w3-center w3-padding-64"
			style="max-width: 1000px" id="band">
			<h1 class="w1-wide">출연 가수</h1>
			<p class="w3-opacity">
				<i>우리는 음악을 사랑합니다.</i>
			</p>
			<p class="w3-justify">
				우리는 최고의 음악을 최고의 여러분께 선사합니다. 각각의 컨셉의 콘서트와 각각의 가수들을 모두 접할 수 있는 곳. 바로
				여기 K-엔코아입니다. <br> 나라에서 허락한 유일한 마약. 동양과 서양, 시대를 초월한 초특급 출연진들이
				기다리고 있습니다. <br> 우리 왼손으로 악수합시다. 그 것이 내 심장과 더 가까우니까요. <br>
				※주의 : 트로트는 취급하지 않습니다.
			</p>
			<div class="w3-row w3-padding-32" id="showAllSinger"></div>

			<!-- The Tour Section -->
			<div class="w3-black" id="tour">
				<div class="w3-container w3-content w3-padding-64"
					style="max-width: 800px">
					<h2 class="w3-wide w3-center">TOUR DATES</h2>
					<p class="w3-opacity w3-center">
						<i>Remember to book your tickets!</i>
					</p>
					<br>

					<ul class="w3-ul w3-border w3-white w3-text-grey">
						<li class="w3-padding">September <span
							class="w3-tag w3-red w3-margin-left">Sold out</span></li>
						<li class="w3-padding">October <span
							class="w3-tag w3-red w3-margin-left">Sold out</span></li>
						<li class="w3-padding">November <span
							class="w3-badge w3-right w3-margin-right">3</span></li>
					</ul>

					<div class="w3-row-padding w3-padding-32" style="margin: 0 -16px">
						<div class="w3-third w3-margin-bottom">
							<img src="images/newyork.jpg" alt="New York" style="width: 100%"
								class="w3-hover-opacity">
							<div class="w3-container w3-white">
								<p>
									<b>New York</b>
								</p>
								<p class="w3-opacity">Fri 27 Nov 2016</p>
								<p>Praesent tincidunt sed tellus ut rutrum sed vitae justo.</p>
								<button class="w3-button w3-black w3-margin-bottom"
									onclick="document.getElementById('ticketModal').style.display='block'">Buy
									Tickets</button>
							</div>
						</div>
						<div class="w3-third w3-margin-bottom">
							<img src="images/paris.jpg" alt="Paris" style="width: 100%"
								class="w3-hover-opacity">
							<div class="w3-container w3-white">
								<p>
									<b>Paris</b>
								</p>
								<p class="w3-opacity">Sat 28 Nov 2016</p>
								<p>Praesent tincidunt sed tellus ut rutrum sed vitae justo.</p>
								<button class="w3-button w3-black w3-margin-bottom"
									onclick="document.getElementById('ticketModal').style.display='block'">Buy
									Tickets</button>
							</div>
						</div>
						<div class="w3-third w3-margin-bottom">
							<img src="images/sanfran.jpg" alt="San Francisco"
								style="width: 100%" class="w3-hover-opacity">
							<div class="w3-container w3-white">
								<p>
									<b>San Francisco</b>
								</p>
								<p class="w3-opacity">Sun 29 Nov 2016</p>
								<p>Praesent tincidunt sed tellus ut rutrum sed vitae justo.</p>
								<button class="w3-button w3-black w3-margin-bottom"
									onclick="document.getElementById('ticketModal').style.display='block'">Buy
									Tickets</button>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Ticket Modal -->
			<div id="ticketModal" class="w3-modal">
				<div class="w3-modal-content w3-animate-top w3-card-4">
					<header class="w3-container w3-teal w3-center w3-padding-32">
						<span
							onclick="document.getElementById('ticketModal').style.display='none'"
							class="w3-button w3-teal w3-xlarge w3-display-topright">&times;</span>
						<h2 class="w3-wide">
							<i class="fa fa-suitcase w3-margin-right"></i>Tickets
						</h2>
					</header>
					<div class="w3-container">
						<p>
							<label><i class="fa fa-shopping-cart"></i> Tickets, $15
								per person</label>
						</p>
						<input class="w3-input w3-border" type="text"
							placeholder="How many?">
						<p>
							<label><i class="fa fa-user"></i> Send To</label>
						</p>
						<input class="w3-input w3-border" type="text"
							placeholder="Enter email">
						<button
							class="w3-button w3-block w3-teal w3-padding-16 w3-section w3-right">
							PAY <i class="fa fa-check"></i>
						</button>
						<button class="w3-button w3-red w3-section"
							onclick="document.getElementById('ticketModal').style.display='none'">
							Close <i class="fa fa-remove"></i>
						</button>
						<p class="w3-right">
							Need <a href="#" class="w3-text-blue">help?</a>
						</p>
					</div>
				</div>
			</div>

			<!-- The Contact Section -->
			<div class="w3-container w3-content w3-padding-64"
				style="max-width: 800px" id="contact">
				<h2 class="w3-wide w3-center">CONTACT</h2>
				<p class="w3-opacity w3-center">
					<i>Fan? Drop a note!</i>
				</p>
				<div class="w3-row w3-padding-32">
					<div class="w3-col m6 w3-large w3-margin-bottom">
						<i class="fa fa-map-marker" style="width: 30px; color: aqua;"></i>
						Chicago, US<br> <i class="fa fa-phone" style="width: 30px"></i>
						Phone: +00 151515<br> <i class="fa fa-envelope"
							style="width: 30px"> </i> Email: mail@mail.com<br>
					</div>
					<div class="w3-col m6">
						<form action="/action_page.php" target="_blank">
							<div class="w3-row-padding" style="margin: 0 -16px 8px -16px">
								<div class="w3-half">
									<input class="w3-input w3-border" type="text"
										placeholder="Name" required name="Name">
								</div>
								<div class="w3-half">
									<input class="w3-input w3-border" type="text"
										placeholder="Email" required name="Email">
								</div>
							</div>
							<input class="w3-input w3-border" type="text"
								placeholder="Message" required name="Message">
							<button class="w3-button w3-black w3-section w3-right"
								type="submit">SEND</button>
						</form>
					</div>
				</div>
			</div>

			<!-- End Page Content -->
		</div>

		<!-- Image of location/map -->
		<img src="images/map.jpg" class="w3-image w3-greyscale-min"
			style="width: 100%">

		<!-- Footer -->
		<footer
			class="w3-container w3-padding-64 w3-center w3-opacity w3-light-grey w3-xlarge">
			<i class="fa fa-facebook-official w3-hover-opacity"></i> <i
				class="fa fa-instagram w3-hover-opacity"></i> <i
				class="fa fa-snapchat w3-hover-opacity"></i> <i
				class="fa fa-pinterest-p w3-hover-opacity"></i> <i
				class="fa fa-twitter w3-hover-opacity"></i> <i
				class="fa fa-linkedin w3-hover-opacity"></i>
			<p class="w3-medium">
				Powered by <a href="https://www.w3schools.com/w3css/default.asp"
					target="_blank">w3.css</a>
			</p>
		</footer>


		<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
		<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
		<script>
			// Automatic Slideshow - change image every 4 seconds
			var myIndex = 0;
			carousel();

			function carousel() {
				var i;
				var x = document.getElementsByClassName("mySlides");
				for (i = 0; i < x.length; i++) {
					x[i].style.display = "none";
				}
				myIndex++;
				if (myIndex > x.length) {
					myIndex = 1
				}
				x[myIndex - 1].style.display = "block";
				setTimeout(carousel, 4000);
			}

			// Used to toggle the menu on small screens when clicking on the menu button
			function myFunction() {
				var x = document.getElementById("navDemo");
				if (x.className.indexOf("w3-show") == -1) {
					x.className += " w3-show";
				} else {
					x.className = x.className.replace(" w3-show", "");
				}
			}

			// When the user clicks anywhere outside of the modal, close it
			var modal = document.getElementById('ticketModal');
			window.onclick = function(event) {
				if (event.target == modal) {
					modal.style.display = "none";
				}
			}

			var count = 0;
			var jsonConcert = null;
			var concertCount = null;
			var jsonSinger = null;
			function loadAllSinger() {
				console.log(count);
				const xhttp = new XMLHttpRequest();

				xhttp.onload = function() {
					if (xhttp.status == 200) {
						if (count == 0) {
							console.log("0번");
							let res_data = this.responseText;
							console.log(res_data);
							jsonConcert = JSON.parse(res_data);
							concertCount = Object.keys(jsonConcert).length;
							let imageBox = document
									.getElementById("showAllSinger");
							imageBox.innerHTML = "<h2>콘서트 라인업이 궁금하신가요?</h2><br>";
						} else if (count == 1) {
							console.log("1번");
							let res_data = this.responseText;
							jsonSinger = JSON.parse(res_data);
							let imageBox = document
									.getElementById("showAllSinger");
							imageBox.innerHTML = "<h2>전체가수</h2><br>";
							for (i in jsonSinger) {
								console.log("확인용@");
								let singerName = jsonSinger[i];
								imageBox.innerHTML += `<div class="w3-third"><p>${singerName}</p><img src="images/가수${i}_${singerName}.jpg" class="w3-round w3-margin-bottom" alt="Random Name" style="width:30%"></div>`;
							}
						} else if (count <= concertCount + 1) {
							let res_data = this.responseText;
							let imageBox = document.getElementById("showAllSinger");
							let num = count-1;
							imageBox.innerHTML = `<h2>콘서트${num} 가수</h2><br>`;
							console.log(res_data);
							for (i in res_data){
								console.log("확인용%");
								let singerId = res_data[i];
								console.log(singerId);
								let singerName = jsonSinger[singerId];
								imageBox.innerHTML += `<div class="w3-third"><p>${singerName}</p><img src="images/가수${singerId}_${singerName}.jpg" class="w3-round w3-margin-bottom" alt="Random Name" style="width:30%"></div>`;
							}
							
						}

						count += 1;
						if (count >= concertCount + 2) {
							count = 0;
						}
					}else{
						console.log("통신대기중..");
					}
				}

				///////////////////////////////////////////////////////////////
				if (count == 0) {
					console.log("count0 servlet으로 모든가수 요청");
					xhttp.open("get", "concert?command=getAllConcert", true);
					xhttp.setRequestHeader("Content-type",
							"application/x-www-form-urlencoded;charset=UTF-8");
					xhttp.send();
				} else if (count == 1) {
					xhttp.open("get", "concert?command=getAllSingers", true);
					xhttp.setRequestHeader("Content-type",
							"application/x-www-form-urlencoded;charset=UTF-8");
					xhttp.send();
				} else if (count <= concertCount + 1) {
					xhttp.open("get", `concert?command=getSingersByConcert&data=${count}`,
							true);
					xhttp.setRequestHeader("Content-type",
							"application/x-www-form-urlencoded;charset=UTF-8");
					xhttp.send();
				}

			}
			let interval = setInterval(loadAllSinger, 3000);
		</script>
</body>
</html>